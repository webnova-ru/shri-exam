!function(e,t){var n="formNova",r={showInlineErrorOnChange:!0,showInlineErrorsOnSubmit:!0,showErrorsOnSubmit:!1,showInputErrorClass:!0,isInputShake:!0,inputClassError:"-input--error",inputShakeClass:"-input-shake",dataAttrNote:"fieldError",dataAttrRules:"validRules",dataAttrValidMsgPos:"validMsgPos",temp_errorNote:'<span class="-input-note-error"></span>',temp_onSubmitError:'<div class="-form-errors" id="formErrors"><h2 class="-form-errors_title" /><ul class="-form-errors_list" /></div>',temp_onSubmitErrorItem:'<li class="-form-errors_list_item" />',afterValidate:function(){},isSubmit:!0,beforeSubmit:function(){}},i={defaults:{commonFormErrorNote:"В форме есть ошибки!",errorNoteInline:"Заполнено неверно",errorNoteOnSubmit:"Поле «%n» заполнено некорректно"},inline:{required:"Обязательно для заполнения",matches:"Не совпадает с «%p»",validEmail:"Электронная почта не верна",validEmails:"Электронные адреса не верны",minLength:"Минимальная длина %p символа",maxLength:"Максимальная длина %p символа",exactLength:"Длина должна быть ровно %p",greaterThan:"Значение дложно быть больше чем %p",lessThan:"Значение должно быть меньше чем %p",alpha:"Только буквы алфавита",alphaRU:"Только буквы русского алфавита",alphaRUdash:"Только буквы русского алфавита и дефис",alphaNumeric:"Только буквы и цифры",alphaDash:"Только буквы, цифры и тире",numeric:"Только цифры",numericDash:"Только цифры и тире",integer:"Только положителные и отрицательные цифры",decimal:"Только цифры с плавающей точкой",isNatural:"Натуральные числа",isNaturalNoZero:"Натуральное число без ведущего нуля"},onSubmit:{required:"Поле «%n» обязательно для заполнения",matches:"Поле «%n» не совпадает с «%p»",validEmail:"Поле «%n» содержить не верный емайл",validEmails:"Поле «%n» содержить не верные емайлы",minLength:"Поле «%n» должно содержать минимум %p символа",maxLength:"Поле «%n» должно содержать не больше %p символов",exactLength:"Поле «%n» должно быть ровно %p символа",greaterThan:"Значение поля «%n» должно быть больше чем %p",lessThan:"Значение поля «%n» должно быть меньше чем %p",alpha:"Поле «%n» должно содержать только буквы алфавита",alphaRU:"Поле «%n» должно содержать только буквы русского алфавита",alphaRUdash:"Поле «%n» должно содержать только буквы русского алфавита и дефис",alphaNumeric:"Поле «%n» должно содержать только буквы и цифры",alphaDash:"Поле «%n» должно содержать только цифры, знаки подчёркивания и тире",numeric:"Поле «%n» должно содержать только цифры",numericDash:"Поле «%n» должно содержать только цифры и тире",integer:"Поле «%n» должно содержать положителные и отрицательные цифры",decimal:"Поле «%n» должно содержать только цифры с плавающей точкой",isNatural:"Поле «%n» должно быть только натуральным числом",isNaturalNoZero:"Поле «%n» должно содержать только натуральное число без ведущего нуля"}},o={rule:/^(.+?)\[(.+)\]$/,numeric:/^[0-9]+$/,integer:/^\-?[0-9]+$/,decimal:/^\-?[0-9]*\.?[0-9]+$/,email:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,6}$/i,alpha:/^[a-z]+$/i,alphaRU:/^[а-я]+$/i,alphaRUdash:/^[а-я-]+$/i,alphaNumeric:/^[a-z0-9]+$/i,alphaDash:/^[a-z0-9_-]+$/i,natural:/^[0-9]+$/i,numericDash:/^[0-9-]+$/i,naturalNoZero:/^[1-9][0-9]*$/i},a={required:function(){var t=e(this),n=t.val();return"checkbox"===t.attr("type")?t.is(":checked")===!0:null!==n&&""!==n},matches:function(t){var n=e(this),r=n.parents("form").find("[name='"+t+"']");return r.length?n.val()===r.val():!1},validEmail:function(){return o.email.test(this.value)},validEmails:function(){for(var e=this.value.split(","),t=0;t<e.length;t++)if(!o.email.test(e[t]))return!1;return!0},minLength:function(e){return o.numeric.test(e)?this.value.length>=parseInt(e,10):!1},maxLength:function(e){return o.numeric.test(e)?this.value.length<=parseInt(e,10):!1},exactLength:function(e){return o.numeric.test(e)?this.value.length===parseInt(e,10):!1},greaterThan:function(e){return o.decimal.test(this.value)?parseFloat(this.value)>parseFloat(e):!1},lessThan:function(e){return o.decimal.test(this.value)?parseFloat(this.value)<parseFloat(e):!1},alpha:function(){return o.alpha.test(this.value)},alphaRU:function(){return o.alphaRU.test(this.value)},alphaRUdash:function(){return o.alphaRUdash.test(this.value)},alphaNumeric:function(){return o.alphaNumeric.test(this.value)},alphaDash:function(){return o.alphaDash.test(this.value)},numeric:function(){return o.decimal.test(this.value)},numericDash:function(){return o.numericDash.test(this.value)},integer:function(){return o.integer.test(this.value)},decimal:function(){return o.decimal.test(this.value)},isNatural:function(){return o.natural.test(this.value)},isNaturalNoZero:function(){return o.naturalNoZero.test(this.value)}},s=function(t,i){this.form=t,this.$form=e(this.form),this.options=e.extend({},r,i),this._name=n,this.messages={inline:{},onSubmit:{}},this.init()};s.prototype={init:function(){var t=this;this.options.showInlineErrorOnChange&&this._getInputsWithValidRule().change(function(){var e=t._validate(this);t._showInlineError(t._getInlineError(e)),t.options.afterValidate(e)}),this.$form.submit(function(){var n=[];return t._getInputsWithValidRule().each(function(){var r=t._validate(this);r.isFailed&&n.push(t._getOnSubmitError(r).error),t.options.showInlineErrorsOnSubmit&&t._showInlineError(t._getInlineError(r)),e.isFunction(t.options.afterValidate)&&t.options.afterValidate(r)}),n.length?(t.options.showErrorsOnSubmit&&t._showErrorsOnSubmit(n),!1):(e.isFunction(t.options.beforeSubmit)&&t.options.beforeSubmit(),t.options.isSubmit?void 0:!1)})},_getInputsWithValidRule:function(){return e("[data-"+this.options.dataAttrRules+"][name]",this.form)},_showErrorsOnSubmit:function(t){var n=e(this.options.temp_onSubmitError);e("h2",n).text(i.defaults.commonFormErrorNote);for(var r=e("ul",n),o=0,a=t.length;a>o;o++)r.append(e(this.options.temp_onSubmitErrorItem).text(t[o]));var s=n.attr("id");s&&e("#"+s,this.form).remove(),this.$form.prepend(n)},_showInlineError:function(t){var r=e(t.this_),i=r.data("plugin_"+n+"_config");if(i&&e.isFunction(i.showInlineError))return i.showInlineError.call(this,t),void 0;if(e("[data-"+this.options.dataAttrNote+' = "'+t.name+'"]',this.form).remove(),this.options.showInputErrorClass&&r.removeClass(this.options.inputClassError),t.error){this.options.showInputErrorClass&&r.addClass(this.options.inputClassError),this.options.isInputShake&&this._shake(r);var o=e(this.options.temp_errorNote).text(t.error).attr("data-"+this.options.dataAttrNote,t.name);r.after(o)}},_shake:function(e){var t=null,n=this.options.inputShakeClass;e.addClass(n),clearTimeout(t),t=setTimeout(function(){e.removeClass(n)},800)},_validate:function(n){var r=e(n),i={this_:n,name:n.name||null,display:n.id?e("label[for='"+n.id+"']",this.form).text()||n.name:n.name,error:null,ruleName:null,ruleParam:null,isFailed:!1},s=r.attr("data-"+this.options.dataAttrRules)||null,u=s.split("|"),l=r.val();if(-1===s.indexOf("required")&&(!l||""===l||l===t))return i;for(var c=0,d=u.length;d>c;c++){var f,p=e.trim(u[c]),h=null;if((f=o.rule.exec(p))&&(p=f[1],h=f[2]),e.isFunction(a[p])&&a[p].call(n,h)===!1){i.isFailed=!0,i.ruleName=p,i.ruleParam=h;break}}return i},_getInlineError:function(e){return this._getError(e,!0)},_getOnSubmitError:function(e){return this._getError(e,!1)},_getError:function(t,n){if(e.isPlainObject(t)&&t.isFailed===!0){var r=i.defaults.errorNoteInline,o=this.messages.inline[t.ruleName]||i.inline[t.ruleName];if(n||(r=i.defaults.errorNoteOnSubmit.replace("%n",t.display),o=this.messages.onSubmit[t.ruleName]||i.onSubmit[t.ruleName]),r=o.replace("%n",t.display),t.ruleParam){var a=t.ruleParam,s=e("[name='"+a+"']",this.form);s.length&&(a=s[0].id?e("label[for='"+s[0].id+"']",this.form).text()||s[0].name:s[0].name),r=r.replace("%p",a)}t.error=r}return t},setValidFunctions:function(t){var n={};for(var r in t){var i=t[r];e.isPlainObject(i)&&e.isFunction(i.rule)&&(n[r]=i.rule),i.errors&&(e.isPlainObject(i.errors)?(i.errors.inline&&"string"==typeof i.errors.inline&&(this.messages.inline[r]=i.errors.inline),i.errors.onSubmit&&"string"==typeof i.errors.onSubmit&&(this.messages.onSubmit[r]=i.errors.onSubmit)):"string"==typeof i.errors&&(this.messages.inline[r]=i.errors))}e.extend(a,n)},setFormElemConfig:function(t,r){"string"==typeof t&&e.isPlainObject(r)&&e(t,this.form).each(function(){e.data(this,"plugin_"+n+"_config")||e.data(this,"plugin_"+n+"_config",r)})},clearErrorsMessage:function(){e("."+this.options.inputClassError,this.$form).removeClass(this.options.inputClassError),e("[data-"+this.options.dataAttrNote+"]").remove()},config:function(t){e.extend(this.options,t)}},e.fn[n]=function(r){var i=arguments;return r===t||"object"==typeof r?this.each(function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new s(this,r))}):"string"==typeof r&&"_"!==r[0]&&"init"!==r?this.each(function(){var t=e.data(this,"plugin_"+n);t instanceof s&&"function"==typeof t[r]&&t[r].apply(t,Array.prototype.slice.call(i,1))}):void 0}}(jQuery);